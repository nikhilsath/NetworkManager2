<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Device Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>Network Device Manager</h1>
    <form id="scan-form">
        <label for="ip_range">Enter IP Range (default: 192.168.68.0/24):</label><br>
        <input type="text" id="ip_range" name="ip_range" value="192.168.68.0/24" required><br><br>
        <button type="submit">Scan Network</button>
    </form>
    <div id="results">
        <table id="results-table" border="1">
            <thead>
                <tr>
                    <th>IP Address</th>
                    <th>MAC Address</th>
                    <th>Vendor</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    <script>
        document.getElementById('scan-form').addEventListener('submit', async function(event) {
            event.preventDefault();
            const ipRange = document.getElementById('ip_range').value;
            const response = await fetch('/check_devices', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ ip_range: ipRange }),
            });
            const devices = await response.json();
            const resultsTable = document.getElementById('results-table').getElementsByTagName('tbody')[0];
            resultsTable.innerHTML = '';  // Clear previous results
            devices.forEach(device => {
                const row = resultsTable.insertRow();
                row.insertCell(0).innerText = device.ip;
                row.insertCell(1).innerText = device.mac;
                row.insertCell(2).innerText = device.vendor;
            });
        });
    </script>
</body>
</html>
